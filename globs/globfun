lineCount() #Same function called earlier in the previous script to use in the counting of lines in commands.txt
{
    wc -l < installLIST.txt	
}

fixowner()
{
sudo chown $USER:$USER /usr/local/lib /usr/local/bin /usr/local/lib64 /usr/local/ /usr/local/* /usr/local/include
sudo chmod 755 /usr/local/* /usr/local/bin/* /usr/local/lib/* /usr/local/lib64/* 2&>/dev/null
}

installer() 
{
sudo wget --progress=bar:force "$1" -O "$2" 2>&1 | progressfilt
}

unpacker() 
{
sudo tar -zxf "$1" -C "$2" | pv -s `du -sb . | grep -o '[0-9]\+'` -N tar 
}

cleaner()
{
sudo rm -rf $1/*
}

clean() 
{
    tput cuu 1 && tput el
}

progressfilt ()
{
    local flag=false c count cr=$'\r' nl=$'\n'
    while IFS='' read -d '' -rn 1 c
    do
        if $flag
        then
            printf '%c' "$c"
        else
            if [[ $c != $cr && $c != $nl ]]
            then
                count=0
            else
                ((count++))
                if ((count > 1))
                then
                    flag=true
                fi
            fi
        fi
    done
}

export -f clean
export -f fixowner
export -f cleaner
export -f progressfilt
export -f lineCount
export -f installer
export -f unpacker
